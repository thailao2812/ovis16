<?xml version="1.0" encoding="utf-8"?>
<odoo> 
	<data>
    	<record id="view_production_plan_tree" model="ir.ui.view">
            <field name="name">view.roduction.plan.tree</field>
            <field name="model">production.plan</field>
            <field name="arch" type="xml">
                <tree string="Production Plan">
                	<field name="production_id"/>
                	<field name="name"/>
                	<field name="user_id"/>
                    <field name="product_id"/>
                    <field name="plan_date"/>
                    <field name="total_qty"/>
                    <field name="total_required"/>
                    <field name="total_production"/>
                    <field name="mc"/>
        			<field name="fm"/>
        			<field name="black"/>
        			<field name="broken"/>
        			<field name="brown"/>
        			<field name="mold"/>
        			<field name="cherry"/>
        			<field name="excelsa"/>
        			<field name="screen18"/>
        			<field name="screen16"/>
        			<field name="screen13"/>
        			<field name="greatersc12"/>
        			<field name="screen12"/>
        			<field name="immature"/>
        			<field name="burn"/>
        			<field name="eaten"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
    	
    	<record id="view_production_plan_form" model="ir.ui.view">
            <field name="name">production.plan.form</field>
            <field name="model">production.plan</field>
            <field name="arch" type="xml">
				<form string="Production Plan">
					<header>
						<button name="action_approve" string="Approve" type="object" attrs="{'invisible': [('state','=','approve')]}" class="oe_highlight"/>
						<button name="print_plan" string="Print Excel" type="object" class="btn-primary"/>
						<button name="print_plan_pdf" string="Print PDF" type="object" class="btn-primary"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,approve"/>
					</header>
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" readonly="1"/>
							</h1>
						</div>
						<group col='4'>
							<group>
								<field name="product_id" required="1" options="{'no_open': True, 'no_create': True}" 
									attrs="{'readonly': [('state','!=','draft')]}" />
								
								<label string='Plan Date' for ='plan_date'/>
								<div class='o_row'>
									<field name="plan_date" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
									<field name="end_date" attrs="{'readonly': [('state','!=','draft')]}"/>
								</div>
								
								<label string='SI Date' for ='from_date'/>
								<div class='o_row'>
									<field name="from_date" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
									<field name="to_date" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
								</div>
                    			<field name="production_id" />
								<field name="si_ids" required="1" 
									widget="many2many_tags"
									domain="[('date','&gt;=', from_date),('date','&lt;=', to_date),('state','not in',('done','cancel'))]"
									attrs="{'readonly': [('state','!=','draft')]}"/>
								<field name="stack_ids" widget="many2many_tags"
									domain="[('init_qty','!=',0),('product_id','=', product_id)]"
									attrs="{'readonly': [('state','!=','draft')]}"/>
							</group>
							<group col="0">
								<group col='4'>
									<field name="tons_per_hours"/>
									<field name="hours_per_shitf"/>
								</group>
								<group>
									<field name="total_hours"/>
									<field name="total_shitf"/>
									<field name="total_days"/>
								</group>
							</group>
						</group>
						
						<group col="4">
							<field name="detail_si_ids" nolabel ='1' attrs="{'readonly': [('state','!=','draft')]}">
								<tree editable="bottom" create="false">
									<field name="date" readonly="1" invisible="1"/>
									<field name="month_si" readonly="1"/>
									<field name="contract_id" readonly="1"/>
									<field name="partner_id" readonly="1"/>
									<field name="categ_id" readonly="1"/>
									<field name="product_id" readonly="1"/>
									<field name="description" readonly="1"/>
									<field name="allowed_franchise" readonly="1"/>
									<field name="product_qty" sum="product_qty" readonly="1"/>
									<field name="packing_id" readonly="1"/>
								</tree>
							</field>
						</group>

						<group col="4">
							<field name="detail_stack_ids" nolabel ='1' attrs="{'readonly': [('state','!=','draft')]}">
								<tree editable="bottom" create="false">
									<field name="name" readonly="1"/>
									<field name="zone_id" readonly="1"/>
									<field name="product_id" readonly="1"/>
									<field name="remaining_qty" sum='remaining_qty' readonly="1"/>
									<field name="mc" readonly="1"/>
									<field name="fm" readonly="1"/>
									<field name="black" readonly="1"/>
									<field name="broken" readonly="1"/>
									<field name="brown" readonly="1"/>
									<field name="mold" readonly="1"/>
									<field name="cherry" readonly="1"/>
									<field name="excelsa" readonly="1"/>
									<field name="screen18" readonly="1"/>
									<field name="screen16" readonly="1"/>
									<field name="screen13" readonly="1"/>
									<field name="greatersc12" readonly="1"/>
									<field name="screen12" readonly="1"/>
									<field name="immature" readonly="1"/>
									<field name="burn" readonly="1"/>
									<field name="eaten" readonly="1"/>
								</tree>
							</field>
						</group>

						<group col="4">
							<group col='0'>
								<group col="8">
									<field name="mc"/>
									<field name="fm"/>
									<field name="black"/>
									<field name="broken"/>
									<field name="brown"/>
									<field name="mold"/>
									<field name="cherry"/>
									<field name="excelsa"/>
									<field name="screen18"/>
									<field name="screen16"/>
									<field name="screen13"/>
									<field name="greatersc12"/>
									<field name="screen12"/>
									<field name="immature"/>
									<field name="burn"/>
									<field name="eaten"/>
								</group>
								<group col="4">
									<field name="user_id" readonly='1'/>
									<field name="user_approve" readonly='1'/>
								</group>
								<group col="2">
									<field name="instruction"/>
									<field name="note"/>
								</group>
							</group>
							<group>
								<field name="detail_qty_ids" nolabel ='1' attrs="{'readonly': [('state','!=','draft')]}">
									<tree editable="bottom" create="false">
										<field name="categ_id" readonly="1"/>
										<field name="required_qty" sum="required_qty" readonly="1"/>
										<field name="recovery" readonly="1"/>
										<field name="qty" sum="qty" readonly="1"/>
									</tree>
								</field>
							</group>
						</group>
					</sheet>
				</form>
            </field>
        </record>

        <record id="production_plan_action" model="ir.actions.act_window">
            <field name="name">Production Plan</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">production.plan</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'form_view_ref': False}</field>
        </record>
		
		
    </data>
</odoo>
