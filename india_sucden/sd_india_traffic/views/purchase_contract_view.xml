<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="purchase_contract_fob_management_link_india" model="ir.ui.view">
        <field name="name">purchase_contract_fob_management_link_india</field>
        <field name="model">purchase.contract</field>
        <field name="arch" type="xml">
            <tree string="Purchase Contract - FOB Link" editable="top" default_order="id desc">
                <field name="name" readonly="1"/>
                <field name="partner_id" readonly="1"/>
                <field name="date_order" readonly="1"/>
                <field name="product_id" readonly="1"/>
                <field name="fob_management_id" attrs="{'readonly': [('state_fob', '=', 'submit')]}" domain="[('state', '!=', 'close')]"/>
                <field name="outturn" attrs="{'readonly': [('state_fob', '=', 'submit')]}"/>
                <field name="differential_india" attrs="{'readonly': [('state_fob', '=', 'submit')]}"/>
                <field name="state_fob" readonly="1" widget="badge"/>
                <button name="button_submit_fob_link" string="Submit" type="object" class="oe_highlight" attrs="{'invisible': [('state_fob', '=', 'submit')]}"/>
                <button name="button_reset_submit_fob_link" string="Reset to draft" type="object" class="oe_highlight" attrs="{'invisible': [('state_fob', '=', 'draft')]}"/>
            </tree>
        </field>
    </record>

    <record id="purchase_contract_fob_management_link_india_view_linked" model="ir.ui.view">
        <field name="name">purchase_contract_fob_management_link_india_view_linked</field>
        <field name="model">purchase.contract</field>
        <field name="arch" type="xml">
            <tree string="Purchase Contract - FOB (Linked)" create='false' editable="top" default_order="id desc">
                <field name="name" readonly="1"/>
                <field name="partner_id" readonly="1"/>
                <field name="date_order" readonly="1"/>
                <field name="product_id" readonly="1"/>
                <field name="fob_management_id" readonly="1"/>
                <field name="outturn" readonly="1"/>
                <field name="differential_india" readonly="1"/>
                <field name="state_fob" readonly="1"/>
            </tree>
        </field>
    </record>

    <record id="purchase_contract_report_for_allocated" model="ir.ui.view">
        <field name="name">purchase_contract_report_for_allocated</field>
        <field name="model">purchase.contract</field>
        <field name="arch" type="xml">
            <tree string="PSC to PC Link Report" create='false' editable="top" default_order="id desc">
                <field name="name" readonly="1"/>
                <field name="partner_id" readonly="1"/>
                <field name="date_order" readonly="1"/>
                <field name="product_id" readonly="1"/>
                <field name="total_qty" readonly="1"/>
                <field name="qty_received" readonly="1"/>
                <field name="outturn" readonly="1"/>
                <field name="finished_qty" readonly="1"/>
                <field name="finished_receive_qty" readonly="1"/>
                <field name="open_qty" readonly="1"/>
                <field name="total_allocated_qty" readonly="1"/>
                <field name="open_qty_check"/>
                <field name="remark_contract" attrs="{'required': [('open_qty_check', '=', True)]}"/>
            </tree>
        </field>
    </record>

     <record id="purchase_contract_fob_link_search" model="ir.ui.view">
        <field name="name">purchase_contract_fob_link_search</field>
        <field name="model">purchase.contract</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="product_id"/>
                <field name="fob_management_id"/>
                <separator/>
                <filter string="Submit" name="submit" domain="[('state_fob', '=', 'submit')]"/>
                <group expand="0" string="Group By">
                   <filter string="Product" name="product" context="{'group_by': 'product_id'}"/>
                   <filter string="FOB Management" name="fob_management_id" context="{'group_by': 'fob_management_id'}"/>
               </group>
            </search>
        </field>
    </record>

     <record model="ir.actions.act_window" id="action_purchase_contract_fob_link">
            <field name="name">Purchase Contract - FOB Link</field>
            <field name="res_model">purchase.contract</field>
            <field name="view_mode">tree</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
        	<field name="search_view_id" ref="sd_india_traffic.purchase_contract_fob_link_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a Consignment Agreement, the first step of a new Consignment Agreement.
                </p><p>
                </p>
            </field>
        </record>

    <record model="ir.actions.act_window" id="action_purchase_contract_fob_linked_view">
            <field name="name">Purchase Contract - FOB (Linked)</field>
            <field name="res_model">purchase.contract</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('fob_management_id', '!=', False)]</field>
            <field name="context">{}</field>
        	<field name="search_view_id" ref="sd_india_traffic.purchase_contract_fob_link_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a Consignment Agreement, the first step of a new Consignment Agreement.
                </p><p>
                </p>
            </field>
        </record>

    <record model="ir.actions.act_window" id="action_purchase_contract_report_allocated">
            <field name="name">PSC to PC Linked Report</field>
            <field name="res_model">purchase.contract</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('type', 'in', ['purchase', 'ptbf'])]</field>
            <field name="context">{}</field>
        	<field name="search_view_id" ref="sd_india_traffic.purchase_contract_fob_link_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new record
                </p><p>
                </p>
            </field>
        </record>

    <record id="action_purchase_contract_fob_link_tree" model="ir.actions.act_window.view">
            <field eval="500" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="purchase_contract_fob_management_link_india"/>
            <field name="act_window_id" ref="action_purchase_contract_fob_link"/>
        </record>

    <record id="action_purchase_contract_fob_linked_view_tree" model="ir.actions.act_window.view">
            <field eval="500" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="purchase_contract_fob_management_link_india_view_linked"/>
            <field name="act_window_id" ref="action_purchase_contract_fob_linked_view"/>
        </record>

    <record id="action_purchase_contract_report_allocated_tree" model="ir.actions.act_window.view">
            <field eval="500" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="purchase_contract_report_for_allocated"/>
            <field name="act_window_id" ref="action_purchase_contract_report_allocated"/>
        </record>
</odoo>